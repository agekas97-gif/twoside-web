<!DOCTYPE html>
<html lang="lt" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TwoSide RP | Modernus Serveris</title>
    
    <link rel="icon" href="logo.png">
    <meta property="og:title" content="TwoSide RP | Modernus Serveris">
    <meta name="theme-color" content="#0070f3">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- KINTAMIEJI --- */
        :root { 
            --primary: #0070f3; 
            --primary-glow: rgba(0, 112, 243, 0.6);
            --bg: #030303; 
            --glass: rgba(18, 18, 18, 0.8); 
            --glass-border: rgba(255, 255, 255, 0.08); 
            --text-main: #ffffff; 
            --text-dim: #a0a0a0;
            --success: #00e676; 
            --danger: #ff1744; 
            --gold: #ffd700; 
            --silver: #c0c0c0;
            --bronze: #cd7f32;
        }
        
        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; } 
        ::-webkit-scrollbar-track { background: #000; } 
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; border: 2px solid #000; }
        
        /* --- PAGRINDINIAI --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text-main); min-height: 100vh; overflow-x: hidden; position: relative; }
        
        /* --- VIDEO FONAS --- */
        #bg-video { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; 
            filter: brightness(0.25) blur(3px) contrast(1.1); transform: scale(1.05); 
        }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        
        .particle { position: absolute; background: rgba(255, 255, 255, 0.2); border-radius: 50%; animation: floatUp 20s infinite linear; }
        @keyframes floatUp { 0% { transform: translateY(100vh) scale(0); opacity: 0; } 100% { transform: translateY(-10vh) scale(1); opacity: 0; } }
        
        /* --- MODERNUS STIKLO DIZAINAS (VISOMS KORTELĖMS) --- */
        .glass-card, .rule-card, .vip-card, .admin-app-card, .action-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        /* Hover efektai kortelėms */
        .rule-card:hover, .vip-card:hover, .action-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 20px 50px rgba(0, 112, 243, 0.2);
        }
        
        /* Blizgesys */
        .rule-card::before, .vip-card::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent);
            transition: 0.6s;
        }
        .rule-card:hover::before, .vip-card:hover::before { left: 100%; }

        .admin-mode-card { border-top: 3px solid red !important; box-shadow: 0 0 60px rgba(255, 0, 0, 0.2) !important; }

        /* --- NAVIGACIJA --- */
        nav { 
            position: fixed; top: 0; width: 100%; padding: 15px 50px; 
            display: flex; justify-content: space-between; align-items: center; 
            z-index: 1000; background: rgba(5, 5, 5, 0.9); 
            backdrop-filter: blur(20px); border-bottom: 1px solid var(--glass-border); 
            transition: 0.3s; 
        }
        .logo { font-weight: 900; font-size: 1.8rem; display: flex; align-items: center; gap: 12px; color: white; letter-spacing: -1px; }
        .logo span { color: var(--primary); }
        .status-dot { width: 10px; height: 10px; background-color: var(--success); border-radius: 50%; box-shadow: 0 0 15px var(--success); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0.7); } 100% { box-shadow: 0 0 0 10px rgba(0, 230, 118, 0); } }
        
        .nav-right { display: flex; align-items: center; gap: 40px; }
        .nav-links { display: flex; gap: 40px; position: relative; }
        .nav-links a { color: #ccc; cursor: pointer; font-weight: 600; font-size: 0.95rem; text-decoration: none; padding: 10px 0; transition: 0.3s; }
        .nav-links a:hover, .nav-links a.active { color: white; text-shadow: 0 0 15px rgba(255,255,255,0.4); }
        
        /* SCROLL SPY LINIJA (SUTVARKYTA) */
        .nav-links a::after { 
            content: ''; position: absolute; width: 0; height: 3px; bottom: 0; left: 50%; 
            background: var(--primary); transition: 0.3s ease-in-out; transform: translateX(-50%);
            box-shadow: 0 0 15px var(--primary); border-radius: 10px;
        }
        .nav-links a.active::after { width: 100%; }

        /* --- MYGTUKAI --- */
        .btn-hero { 
            padding: 15px 40px; border-radius: 12px; font-weight: 800; border: none; cursor: pointer; transition: all 0.3s ease; 
            background: linear-gradient(135deg, var(--primary), #0050b3); color: white; display: inline-flex; align-items: center; gap: 10px;
            text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem; box-shadow: 0 5px 20px rgba(0, 112, 243, 0.3);
        }
        .btn-hero:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(0, 112, 243, 0.5); filter: brightness(1.2); }
        
        #discord-btn { background: #5865F2; box-shadow: 0 5px 20px rgba(88, 101, 242, 0.3); }
        #discord-btn:hover { background: #4752c4; box-shadow: 0 15px 35px rgba(88, 101, 242, 0.5); }

        /* --- PAGRINDINIS LAYOUT --- */
        .main-wrapper { max-width: 1300px; margin: 0 auto; padding-top: 140px; padding-bottom: 100px; width: 90%; }
        section { min-height: auto; margin-bottom: 120px; scroll-margin-top: 140px; }
        
        h1 { font-size: 4.5rem; font-weight: 900; line-height: 1; margin-bottom: 25px; letter-spacing: -2px; }
        .blue-gradient { background: linear-gradient(135deg, #fff 40%, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .typewriter { border-right: 4px solid var(--primary); animation: blink 0.8s infinite; padding-right: 5px; }
        @keyframes blink { 50% { border-color: transparent; } }
        
        .dash-grid, .vip-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-top: 40px; }
        
        .rule-card i, .vip-card i { font-size: 2.5rem; color: var(--primary); margin-bottom: 20px; filter: drop-shadow(0 0 10px var(--primary-glow)); }
        .rule-card h4 { font-size: 1.6rem; font-weight: 800; margin-bottom: 10px; color: white; }
        .rule-card p { color: var(--text-dim); font-size: 1rem; line-height: 1.6; }

        /* --- ADMIN UI --- */
        .toggle-btn {
            width: 100%; padding: 14px; margin-top: 20px;
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc; font-weight: 700; font-size: 0.85rem;
            border-radius: 12px; cursor: pointer; transition: 0.3s;
            text-transform: uppercase; letter-spacing: 1px;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .toggle-btn:hover { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 0 25px rgba(0, 112, 243, 0.4); transform: scale(1.02); }
        
        .admin-nav-btn {
            background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); padding: 18px;
            text-align: left; border-radius: 14px; color: #ccc; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; gap: 15px; transition: 0.3s; margin-bottom: 10px;
        }
        .admin-nav-btn:hover, .admin-nav-btn.active { background: rgba(0, 112, 243, 0.15); color: var(--primary); border-color: var(--primary); transform: translateX(5px); }
        
        .admin-app-card { 
            background: rgba(30,30,30,0.6); padding: 25px; border-radius: 18px; margin-bottom: 20px; 
            border: 1px solid var(--glass-border); border-left: 4px solid var(--primary); 
            animation: slideUp 0.4s ease-out; 
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .action-card { text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
        .action-card:hover { border-color: var(--danger); background: rgba(220, 53, 69, 0.1); box-shadow: 0 10px 30px rgba(220, 53, 69, 0.2); }
        
        /* --- LOADER --- */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #050505; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: 0.5s; flex-direction: column; }
        #preloader.hidden { opacity: 0; pointer-events: none; visibility: hidden; }
        .admin-load-text { color: var(--danger) !important; text-shadow: 0 0 30px red; font-size: 3.5rem !important; animation: blink 1s infinite; }
        
        .admin-controls { display: none; } 
        .admin-controls.visible { display: block; }
        
        /* --- FORMOS --- */
        .input-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 10px; font-weight: 700; color: #ddd; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; }
        input, textarea { width: 100%; background: rgba(0,0,0,0.4); border: 1px solid var(--glass-border); padding: 18px; border-radius: 14px; color: white; outline: none; transition: 0.3s; font-size: 1rem; }
        input:focus, textarea:focus { border-color: var(--primary); background: rgba(0, 112, 243, 0.05); box-shadow: 0 0 20px rgba(0, 112, 243, 0.1); }
        
        /* --- MODAL --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .modal-overlay.open { display: flex; animation: fadeIn 0.3s; }
        .modal-content { background: #0f0f0f; border: 1px solid var(--primary); border-radius: 30px; padding: 50px; width: 95%; max-width: 650px; position: relative; box-shadow: 0 0 80px rgba(0, 112, 243, 0.3); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- STATISTIKA --- */
        .stats-row { display: flex; gap: 60px; margin-top: 50px; flex-wrap: wrap; }
        .stat-box { text-align: center; flex: 1; }
        .stat-box h2 { font-size: 3.5rem; font-weight: 800; margin: 0; color: white; line-height: 1; }
        .stat-box .label { color: var(--text-dim); font-weight: 600; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; margin-top: 10px; }

        @media (max-width: 768px) {
            nav { padding: 20px; flex-direction: column; height: auto; background: rgba(0,0,0,0.95); }
            .nav-right, .nav-links { flex-direction: column; gap: 20px; width: 100%; text-align: center; }
            .nav-links a { display: block; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
            .nav-links a::after { display: none; }
            h1 { font-size: 3rem; }
            .admin-layout { flex-direction: column; }
            .admin-sidebar { width: 100%; border-right: none; margin-bottom: 30px; border-bottom: 1px solid var(--glass-border); padding-bottom: 20px; }
            .stats-row { flex-direction: column; gap: 30px; }
        }
    </style>
</head>
<body>

    <div id="preloader">
        <h1 style="font-size: 3rem; font-weight: 900;" id="loaderText">TWOSIDE<span style="color:var(--primary)">.LT</span></h1>
        <div style="margin-top:20px; color:#666; font-family:monospace; letter-spacing: 2px;">KRAUNAMI DUOMENYS...</div>
    </div>

    <div id="particles"></div>
    <video autoplay muted loop playsinline id="bg-video"><source src="https://static.videezy.com/system/resources/previews/000/042/179/original/Traffic_lights_timelapse.mp4" type="video/mp4"></video>

    <div id="toast" style="visibility:hidden; min-width: 250px; background-color: #111; color: #fff; text-align: center; border-radius: 12px; padding: 16px; position: fixed; z-index: 2000; left: 50%; bottom: 80px; transform: translateX(-50%); border: 1px solid var(--success); font-weight: bold; box-shadow: 0 10px 40px rgba(0,230,118,0.2);">
        <i class="fas fa-check-circle" style="color: #00ff88; margin-right: 10px;"></i> IP Nukopijuotas!
    </div>

    <nav>
        <div class="logo"><div class="status-dot"></div><div>TWOSIDE<span>.LT</span></div></div>
        <div class="nav-right">
            <div class="nav-links">
                <a onclick="scrollToSection('home')" id="link-home" class="active">PAGRINDINIS</a>
                <a onclick="scrollToSection('about')" id="link-about">APRAŠYMAS</a>
                <a onclick="scrollToSection('rules')" id="link-rules">TAISYKLĖS</a>
            </div>
            <div id="auth-container">
                <button id="discord-btn" class="btn-hero" onclick="loginWithDiscord()"><i class="fab fa-discord"></i> PRISIJUNGTI</button>
                <div id="user-profile" style="display:none; align-items:center; gap:15px; background:rgba(255,255,255,0.08); padding:8px 20px 8px 8px; border-radius:50px; border:1px solid rgba(255,255,255,0.1);">
                    <img id="user-avatar" src="" style="width:35px; border-radius:50%; border:2px solid var(--primary);">
                    <span id="user-name" style="font-weight:bold; font-size:0.9rem;"></span>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-wrapper">
        
        <section id="dashboard" style="display:none;">
            
            <div class="glass-card" id="dash-card">
                <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:20px;">
                    <div style="display:flex; align-items:center; gap:25px;">
                        <img id="dash-avatar" src="" style="width: 90px; border-radius: 25px; border: 3px solid var(--primary); box-shadow: 0 0 30px rgba(0, 112, 243, 0.4);">
                        <div>
                            <h2 id="dash-welcome" style="margin:0; font-size:2.2rem; font-weight:800;">Sveikas!</h2>
                            <p style="color:var(--text-dim); margin-top:5px; font-family:monospace; background:rgba(255,255,255,0.05); padding:5px 12px; border-radius:8px; display:inline-block;">ID: <span id="dash-id"></span></p>
                        </div>
                    </div>
                    <button onclick="logout()" class="btn-hero" style="background:linear-gradient(135deg, #ff1744, #b71c1c); box-shadow: 0 5px 20px rgba(255, 23, 68, 0.3);">ATSIJUNGTI</button>
                </div>
            </div>

            <div id="admin-area" class="glass-card" style="display:none; border-top: 3px solid var(--danger);">
                <h2 style="color:var(--danger); margin-bottom:30px; display:flex; align-items:center; gap:15px;">
                    <i class="fas fa-user-shield"></i> ADMIN VALDYMO PULTAS
                </h2>
                <div class="admin-layout" style="display: flex; gap: 30px; min-height: 450px;">
                    <div class="admin-sidebar" style="width: 250px; border-right: 1px solid var(--glass-border); padding-right: 20px;">
                        <div class="admin-nav-btn active" onclick="switchTab('apps')"><i class="fas fa-clipboard-list"></i> Whitelist Anketos</div>
                        <div class="admin-nav-btn" onclick="switchTab('actions')"><i class="fas fa-bolt"></i> Veiksmai</div>
                        <div class="admin-nav-btn" onclick="switchTab('stats')"><i class="fas fa-chart-bar"></i> Statistika</div>
                    </div>
                    <div class="admin-content" style="flex: 1; padding-left: 10px;">
                        <div id="tab-apps">
                            <h3 style="margin-bottom:20px; color:white;">Gautos Anketos</h3>
                            <div id="applications-list">
                                <p style="color:#666; text-align:center; margin-top:40px;">Kraunama...</p>
                            </div>
                        </div>
                        <div id="tab-actions" style="display:none;">
                            <h3 style="margin-bottom:20px; color:white;">Greitieji Veiksmai</h3>
                            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px;">
                                <div class="action-card glass-card" onclick="alert('Serveris perkraunamas... (Simuliacija)')">
                                    <i class="fas fa-power-off" style="color:var(--danger); font-size:2.5rem; margin-bottom:15px;"></i>
                                    <h4>Perkrauti Serverį</h4>
                                </div>
                                <div class="action-card glass-card" onclick="alert('Cache sėkmingai išvalytas!')">
                                    <i class="fas fa-trash-alt" style="color:var(--gold); font-size:2.5rem; margin-bottom:15px;"></i>
                                    <h4>Išvalyti Cache</h4>
                                </div>
                                <div class="action-card glass-card" onclick="alert('Pranešimas išsiųstas į Discord!')">
                                    <i class="fas fa-bullhorn" style="color:#f1c40f; font-size:2.5rem; margin-bottom:15px;"></i>
                                    <h4>Skelbti Pranešimą</h4>
                                </div>
                            </div>
                        </div>
                        <div id="tab-stats" style="display:none;">
                            <h3 style="margin-bottom:20px; color:white;">Serverio Statistika</h3>
                            <div class="glass-card" style="text-align:center; padding:50px;">
                                <h1 style="color:var(--primary); margin-bottom:10px; font-size:5rem;">1,420</h1>
                                <p style="color:var(--text-dim); font-size:1.2rem;">Registruotų Vartotojų</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="wl-card" class="glass-card" style="border-top: 3px solid var(--primary); padding:40px;">
                <h3 style="margin-bottom:15px; display:flex; align-items:center; gap:10px; font-size:1.8rem;">
                    <i class="fas fa-id-card" style="color:var(--primary)"></i> WHITELIST STATUSAS
                </h3>
                <p id="wl-status-text" style="color:var(--text-dim); margin-bottom:30px; font-size:1.2rem;">Tikrinama tavo būsena...</p>
                <div id="wl-action-container">
                    <button id="btn-wl-apply" class="btn-hero" onclick="openModal()" style="display:none;">PILDYTI ANKETĄ <i class="fas fa-pen"></i></button>
                </div>
            </div>

            <div class="dash-grid">
                <div class="rule-card" id="card-policija">
                    <div style="text-align:center;">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Policija</h4>
                        <p id="status-policija" style="color:var(--success); font-weight:bold; font-size:1.1rem; margin-top:10px;">ATIDARYTA</p>
                    </div>
                    <div class="admin-controls" id="adm-policija">
                        <button class="toggle-btn" onclick="toggleJob('policija')">KEISTI STATUSĄ</button>
                    </div>
                </div>
                
                <div class="rule-card" id="card-medikai">
                    <div style="text-align:center;">
                        <i class="fas fa-user-md"></i>
                        <h4>Medikai</h4>
                        <p id="status-medikai" style="color:var(--danger); font-weight:bold; font-size:1.1rem; margin-top:10px;">UŽDARYTA</p>
                    </div>
                    <div class="admin-controls" id="adm-medikai">
                        <button class="toggle-btn" onclick="toggleJob('medikai')">KEISTI STATUSĄ</button>
                    </div>
                </div>

                <div class="rule-card" style="border-top: 3px solid var(--gold);">
                    <div style="text-align:center;">
                        <i class="fas fa-crown" style="color:var(--gold);"></i>
                        <h4>VIP Narystė</h4>
                        <p>Peržiūrėti planus ir privilegijas</p>
                    </div>
                    <button class="toggle-btn" style="background:var(--gold); color:black; border:none; box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);" onclick="openVip()">ATIDARYTI</button>
                </div>
            </div>
        </section>

        <section id="home">
            <div class="glass-card" style="padding: 100px 60px; text-align: left;">
                <div style="display:inline-flex; align-items:center; gap:10px; background: rgba(0, 112, 243, 0.15); padding: 10px 25px; border-radius: 50px; color: var(--primary); font-weight: 800; font-size: 0.9rem; margin-bottom: 30px; border: 1px solid var(--primary);">
                    <i class="fas fa-check-circle"></i> SEZONAS 2.0 STARTAVO
                </div>
                <h1 style="font-weight:900;">TWOSIDE <span class="blue-gradient typewriter">ROLEPLAY</span></h1>
                <p style="font-size:1.3rem; color:var(--text-dim); max-width:650px; margin-bottom:40px; line-height:1.7;">
                    Prisijunk prie sparčiausiai augančios bendruomenės Lietuvoje. Unikalios sistemos, brandi administracija ir tavo nauja istorija prasideda čia.
                </p>
                <div style="display:flex; gap:20px; flex-wrap:wrap; margin-bottom:60px;">
                    <button class="btn-hero" onclick="copyIP()"><i class="fas fa-play"></i> PRISIJUNGTI DABAR</button>
                    <a href="https://discord.gg/SyGUUGWqj6" target="_blank" class="btn-hero" style="background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); box-shadow:none;"><i class="fab fa-discord"></i> DISCORD</a>
                </div>
                
                <div class="stats-row">
                    <div class="stat-box"><h2>128<span style="font-size:1.5rem; color:#666;">/128</span></h2><div class="label">Žaidėjai</div></div>
                    <div class="stat-box"><h2 style="color:var(--primary);">8</h2><div class="label">Pareigūnai</div></div>
                    <div class="stat-box"><h2 style="color:#5865F2;">1420</h2><div class="label">Discord Nariai</div></div>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="glass-card">
                <h2 style="font-size: 3rem; margin-bottom: 50px; text-align:center;">KODĖL <span class="blue-gradient">TWOSIDE?</span></h2>
                <div class="dash-grid">
                    <div class="rule-card"><i class="fas fa-tachometer-alt"></i><h4>Optimizuota</h4><p>Serveris kurtas galvojant apie stabilumą ir greitį.</p></div>
                    <div class="rule-card"><i class="fas fa-users"></i><h4>Bendruomenė</h4><p>Draugiška ir brandi bendruomenė, padedanti naujokams.</p></div>
                    <div class="rule-card"><i class="fas fa-briefcase"></i><h4>Ekonomika</h4><p>Realistiška ekonomika, darbai ir verslai.</p></div>
                </div>
            </div>
        </section>

        <section id="rules">
            <div class="glass-card">
                <h2 style="font-size: 3rem; margin-bottom: 50px; text-align:center;">SVARBIAUSIOS <span class="blue-gradient">TAISYKLĖS</span></h2>
                <div class="dash-grid">
                    <div class="rule-card"><h4><i class="fas fa-skull"></i> RDM</h4><p>Žudymas be svarios RP priežasties griežtai draudžiamas.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-car-crash"></i> VDM</h4><p>Trankymas su mašina kaip ginklu draudžiamas.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-theater-masks"></i> Power Gaming</h4><p>Neįmanomi veiksmai ir jėgos naudojimas draudžiami.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-sync-alt"></i> NLR</h4><p>Miręs personažas neprisimena paskutinės situacijos.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-exclamation-triangle"></i> Fear RP</h4><p>Privaloma branginti gyvybę, kai gresia pavojus.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-headset"></i> Meta Gaming</h4><p>Draudžiama naudoti OOC informaciją IC tikslais.</p></div>
                </div>
            </div>
        </section>

    </div>

    <div class="modal-overlay" id="appModal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
                <h2 style="margin:0; font-size:2rem;">WHITELIST ANKETA</h2>
                <i class="fas fa-times" style="cursor:pointer; font-size:1.8rem; color:var(--text-dim);" onclick="closeModal()"></i>
            </div>
            <form onsubmit="submitForm(event)">
                <div class="input-group"><label>1. Kiek tau metų?</label><input type="number" id="q1" required placeholder="Pvz: 16"></div>
                <div class="input-group"><label>2. RP Patirtis (Projektai)?</label><textarea id="q2" required placeholder="Kur žaidei anksčiau?"></textarea></div>
                <div class="input-group"><label>3. Kas yra NLR?</label><textarea id="q3" required placeholder="New Life Rule yra..."></textarea></div>
                <div class="input-group"><label>4. Kas yra FEARRP?</label><textarea id="q4" required placeholder="Fear Roleplay yra..."></textarea></div>
                <div class="input-group"><label>5. Kodėl nori žaisti pas mus?</label><textarea id="q5" required placeholder="Mane sudomino..."></textarea></div>
                <button type="submit" class="btn-hero" style="width:100%; justify-content:center;">SIŲSTI ANKETĄ</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="vipModal">
        <div class="modal-content" style="max-width:900px;">
            <div style="text-align:right;"><i class="fas fa-times" style="cursor:pointer; font-size:1.8rem; color:var(--text-dim);" onclick="closeVip()"></i></div>
            <h2 style="text-align:center; margin-bottom:40px; font-size:3rem; text-shadow:0 0 20px rgba(255,215,0,0.3);">VIP PLANAI</h2>
            <div class="vip-grid">
                <div class="vip-card" style="border-top: 4px solid #cd7f32;">
                    <div style="text-align:center;">
                        <i class="fas fa-medal" style="color:#cd7f32; font-size:3rem;"></i>
                        <h3 style="color:#cd7f32; margin:10px 0;">BRONZE</h3>
                        <h2 style="font-size:3rem;">5€</h2>
                    </div>
                    <ul style="list-style:none; padding:20px 0; text-align:center; color:var(--text-dim);">
                        <li style="margin-bottom:10px;"><i class="fas fa-check" style="color:var(--success); font-size:1rem;"></i> Prioritetinė eilė</li>
                        <li><i class="fas fa-check" style="color:var(--success); font-size:1rem;"></i> 1 Custom Mašina</li>
                    </ul>
                    <button class="btn-hero" style="width:100%; justify-content:center;">PIRKTI</button>
                </div>
                <div class="vip-card" style="border-top: 4px solid #c0c0c0;">
                    <div style="text-align:center;">
                        <i class="fas fa-medal" style="color:#c0c0c0; font-size:3rem;"></i>
                        <h3 style="color:#c0c0c0; margin:10px 0;">SILVER</h3>
                        <h2 style="font-size:3rem;">10€</h2>
                    </div>
                    <ul style="list-style:none; padding:20px 0; text-align:center; color:var(--text-dim);">
                        <li style="margin-bottom:10px;"><i class="fas fa-check" style="color:var(--success); font-size:1rem;"></i> Aukščiausia eilė</li>
                        <li><i class="fas fa-check" style="color:var(--success); font-size:1rem;"></i> 2 Custom Mašinos</li>
                    </ul>
                    <button class="btn-hero" style="width:100%; justify-content:center;">PIRKTI</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // SVARBU: Patikrink ar ši nuoroda vis dar veikia
        const API_URL = "https://fingers-eagles-freely-ministers.trycloudflare.com";
        
        const CLIENT_ID = "1470568120921100423"; 
        const REDIRECT_URI = "https://twoside.lt";

        let currentUser = null;

        // --- SCROLL SPY (SUTVARKYTAS) ---
        window.addEventListener('scroll', () => {
            let current = "";
            const sections = document.querySelectorAll("section");
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                // Aktyvuoja, kai esi 1/3 sekcijos viduje
                if (pageYOffset >= sectionTop - window.innerHeight / 3) {
                    current = section.getAttribute("id");
                }
            });

            // Jei pačiame viršuje -> Home
            if (pageYOffset < 100) current = "home";

            document.querySelectorAll(".nav-links a").forEach(li => {
                li.classList.remove("active");
                if (li.id === `link-${current}`) {
                    li.classList.add("active");
                }
            });
        });

        // --- DALELES (PARTICLES) ---
        function createParticles() {
            const container = document.getElementById('particles');
            for(let i=0; i<25; i++){
                let p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random()*100 + 'vw';
                p.style.top = Math.random()*100 + 'vh';
                let size = Math.random()*4;
                p.style.width = size + 'px';
                p.style.height = size + 'px';
                p.style.animationDuration = Math.random()*15 + 10 + 's';
                p.style.opacity = Math.random() * 0.5;
                container.appendChild(p);
            }
        }
        createParticles();

        function scrollToSection(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }
        function loginWithDiscord() { window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=identify`; }
        function logout() { localStorage.removeItem('token'); window.location.reload(); }
        function openModal() { document.getElementById('appModal').classList.add('open'); }
        function closeModal() { document.getElementById('appModal').classList.remove('open'); }
        function openVip() { document.getElementById('vipModal').classList.add('open'); }
        function closeVip() { document.getElementById('vipModal').classList.remove('open'); }
        
        function copyIP() { 
            navigator.clipboard.writeText('connect cfx.re/join/3zv39z'); 
            const toast = document.getElementById("toast");
            toast.style.visibility = "visible";
            toast.style.animation = "fadein 0.5s, fadeout 0.5s 2.5s";
            setTimeout(() => { toast.style.visibility = "hidden"; }, 3000);
        }

        function switchTab(tab) {
            document.querySelectorAll('.admin-content > div').forEach(d => d.style.display='none');
            document.getElementById(`tab-${tab}`).style.display='block';
            document.querySelectorAll('.admin-nav-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        // --- INIT & LOGIC ---
        async function init() {
            const fragment = new URLSearchParams(window.location.hash.slice(1));
            let token = fragment.get('access_token') || localStorage.getItem('token');

            if (token) {
                localStorage.setItem('token', token);
                try {
                    const userRes = await fetch('https://discord.com/api/users/@me', { headers: { authorization: `Bearer ${token}` } });
                    
                    if (!userRes.ok) throw new Error("Token expired");
                    const user = await userRes.json();
                    currentUser = user;

                    // UI Updates
                    document.getElementById('discord-btn').style.display = 'none';
                    document.getElementById('user-profile').style.display = 'flex';
                    document.getElementById('user-name').innerText = user.username;
                    document.getElementById('user-avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                    
                    document.getElementById('dashboard').style.display = 'block';
                    document.getElementById('dash-welcome').innerText = `Sveikas, ${user.username}!`;
                    document.getElementById('dash-id').innerText = user.id;
                    document.getElementById('dash-avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;

                    // GAUTI STATUSĄ
                    try {
                        const statusRes = await fetch(`${API_URL}/check-status?id=${user.id}`);
                        const status = await statusRes.json();

                        // Adminas?
                        if (status.isAdmin) {
                            const loader = document.getElementById('loaderText');
                            loader.innerHTML = "TWOSIDE <span style='color:red'>ADMIN</span>";
                            loader.classList.add('admin-load-text');
                            document.getElementById('admin-area').style.display = 'block';
                            document.querySelectorAll('.admin-controls').forEach(el => el.classList.add('visible'));
                            document.getElementById('dash-card').classList.add('admin-mode-card');
                            loadApps(user.id);
                        }

                        // Whitelist statusas?
                        const wlText = document.getElementById('wl-status-text');
                        const wlBtn = document.getElementById('btn-wl-apply');
                        const wlCard = document.getElementById('wl-card');

                        if (status.isWhitelisted) {
                            wlCard.style.borderTop = "3px solid #00e676";
                            wlText.innerHTML = "✅ <b style='color:#00e676'>JŪS TURITE WHITELIST</b>";
                            wlBtn.style.display = 'none';
                        } else if (status.cooldown) {
                            wlCard.style.borderTop = "3px solid #ff1744";
                            wlText.innerHTML = `⛔ <b>ATMESTA.</b> Bandykite už <span style='color:#ff1744'>${status.timeLeft} val.</span>`;
                            wlBtn.style.display = 'none';
                        } else {
                            wlText.innerText = "Norėdamas žaisti, privalai užpildyti anketą.";
                            wlBtn.style.display = "inline-flex";
                        }
                    } catch(err) {
                        console.log("Serveris nepasiekiamas:", err);
                        document.getElementById('wl-status-text').innerText = "Serveris nepasiekiamas (bandykite vėliau).";
                    }
                } catch (e) { 
                    console.error("Auth Error:", e); 
                    localStorage.removeItem('token');
                }
            }
            setTimeout(() => document.getElementById('preloader').classList.add('hidden'), 1000);
        }

        async function submitForm(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "SIUNČIAMA...";
            btn.disabled = true;
            
            const payload = {
                discordId: currentUser.id,
                discordName: currentUser.username,
                answers: {
                    age: document.getElementById('q1').value,
                    history: document.getElementById('q2').value,
                    nlr: document.getElementById('q3').value,
                    fearrp: document.getElementById('q4').value,
                    why: document.getElementById('q5').value
                }
            };

            try {
                const res = await fetch(`${API_URL}/submit-app`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(payload)
                });
                const data = await res.json();
                
                if (data.success) {
                    alert("Anketa išsiųsta sėkmingai!");
                    window.location.reload();
                } else {
                    alert("Klaida siunčiant.");
                }
            } catch (e) { alert("Nepavyko susisiekti su serveriu."); }
            
            btn.innerText = originalText;
            btn.disabled = false;
        }

        async function loadApps(adminId) {
            try {
                const res = await fetch(`${API_URL}/get-apps?adminId=${adminId}`);
                const apps = await res.json();
                const list = document.getElementById('applications-list');
                
                if(apps.length === 0) { list.innerHTML = "<p style='color:#888; text-align:center; padding:20px;'>Nėra naujų anketų.</p>"; return; }

                list.innerHTML = apps.map(app => `
                    <div class="admin-app-card" id="app-${app.id}">
                        <div class="admin-app-header">
                            <h3 style="margin:0; display:flex; align-items:center; gap:10px;">
                                <i class="fab fa-discord" style="color:#5865F2"></i> ${app.discordName} 
                                <span style="font-size:0.8rem; color:#666;">(${app.discordId})</span>
                            </h3>
                            <small style="color:#666;">${new Date(parseInt(app.id)).toLocaleTimeString()}</small>
                        </div>
                        <div class="admin-app-grid">
                            <div class="admin-answer-box"><span class="admin-answer-label">Amžius</span>${app.answers.age}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">Istorija</span>${app.answers.history}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">NLR</span>${app.answers.nlr}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">FearRP</span>${app.answers.fearrp}</div>
                            <div class="admin-answer-box" style="grid-column: span 2;"><span class="admin-answer-label">Kodėl mes?</span>${app.answers.why}</div>
                        </div>
                        <div class="admin-actions">
                            <button class="toggle-btn" style="background:var(--success); border:none; color:black; margin-top:0;" onclick="handle('${app.id}', 'approve')"><i class="fas fa-check"></i> PRIIMTI</button>
                            <button class="toggle-btn" style="background:var(--danger); border:none; margin-top:0;" onclick="handle('${app.id}', 'reject')"><i class="fas fa-times"></i> ATMESTI</button>
                        </div>
                    </div>
                `).join('');
            } catch(e) { console.error(e); }
        }

        async function handle(id, action) {
            if(!confirm("Ar tikrai?")) return;
            const res = await fetch(`${API_URL}/handle-app`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ adminId: currentUser.id, appId: id, action })
            });
            const data = await res.json();
            alert(data.msg);
            if(data.success) {
                const el = document.getElementById(`app-${id}`);
                el.style.opacity = '0';
                setTimeout(() => el.remove(), 300);
            }
        }

        init();
    </script>
</body>
</html>
