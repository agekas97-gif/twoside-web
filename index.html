<!DOCTYPE html>
<html lang="lt" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TwoSide RP | Modernus Serveris</title>
    
    <link rel="icon" href="https://media.discordapp.net/attachments/1353696356639969400/1366056131499135087/3294i2394819-removebg-preview.png">
    <meta property="og:title" content="TwoSide RP | Modernus Serveris">
    <meta name="theme-color" content="#0070f3">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --blue: #0070f3; --bg: #050505; --card-bg: rgba(12, 12, 12, 0.90); --text-main: #ffffff; --text-dim: #999999; --border: rgba(255, 255, 255, 0.1); --success: #157a46; --danger: #dc3545; --gold: #ffc107; --silver: #c0c0c0; --bronze: #cd7f32; --police: #3498db; }
        ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: #050505; } ::-webkit-scrollbar-thumb { background: var(--blue); border-radius: 4px; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text-main); min-height: 100vh; overflow-x: hidden; position: relative; }
        #bg-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; filter: brightness(0.25); }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .particle { position: absolute; background: rgba(255, 255, 255, 0.5); border-radius: 50%; animation: float 20s infinite linear; }
        @keyframes float { 0% { transform: translateY(0) translateX(0); opacity: 0; } 100% { transform: translateY(-100vh) translateX(50px); opacity: 0; } }
        
        /* LOADING SCREEN */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s; flex-direction: column; }
        #preloader.hidden { opacity: 0; visibility: hidden; }
        .loader-text { font-size: 2rem; font-weight: 900; letter-spacing: 5px; animation: blink 1.5s infinite; transition: 0.3s; }
        .loader-text span { color: var(--blue); }
        .admin-load-text { color: #ff0000 !important; text-shadow: 0 0 20px red; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        
        nav { position: fixed; top: 0; width: 100%; padding: 0 50px; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(15px); z-index: 1000; border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.6); height: 90px; transition: 0.3s; }
        .logo { font-weight: 800; font-size: 1.8rem; display: flex; align-items: center; gap: 15px; color: white; }
        .logo span { color: var(--blue); }
        .status-dot { width: 12px; height: 12px; background-color: #00ff88; border-radius: 50%; box-shadow: 0 0 15px #00ff88; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.3); opacity: 0.6; } }
        .nav-right { display: flex; align-items: center; gap: 50px; }
        .nav-links { display: flex; gap: 35px; }
        .nav-links a { color: #ccc; cursor: pointer; font-weight: 700; font-size: 0.9rem; position: relative; transition: 0.3s; }
        .nav-links a:hover, .nav-links a.active { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .nav-links a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0; background: var(--blue); transition: 0.3s; }
        .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }
        #auth-container { display: flex; align-items: center; }
        #discord-btn { background: #5865F2; color: white; border: none; padding: 10px 25px; border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        #discord-btn:hover { background: #4752c4; transform: translateY(-2px); }
        #user-profile { display: none; align-items: center; gap: 15px; background: rgba(255,255,255,0.05); padding: 6px 20px 6px 6px; border-radius: 50px; border: 1px solid var(--border); }
        #user-avatar { width: 38px; height: 38px; border-radius: 50%; border: 2px solid var(--blue); }
        .main-wrapper { display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding-bottom: 100px; width: 100%; max-width: 1400px; margin: 0 auto; padding-top: 0; }
        section { display: block; width: 100%; min-height: 100vh; padding-top: 130px; }
        #dashboard { display: none; }
        
        /* CARD STYLES */
        .glass-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 30px; padding: 60px; position: relative; backdrop-filter: blur(20px); box-shadow: 0 20px 60px rgba(0,0,0,0.5); width: 100%; transition: 0.5s; margin-bottom: 30px; }
        .admin-mode-card { border-top: 2px solid red !important; box-shadow: 0 0 40px rgba(255, 0, 0, 0.3) !important; }
        .admin-badge { background: red; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; margin-left: 10px; vertical-align: middle; box-shadow: 0 0 10px red; }
        
        h1 { font-size: 5rem; font-weight: 900; line-height: 0.95; margin-bottom: 30px; letter-spacing: -3px; }
        .blue-gradient { background: linear-gradient(135deg, #fff 30%, var(--blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .typewriter { display: inline-block; overflow: hidden; border-right: .15em solid var(--blue); white-space: nowrap; animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite; }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { 50% { border-color: transparent } }
        .dash-grid, .vip-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 20px; }
        .rule-card, .vip-card { background: rgba(20, 20, 20, 0.6); padding: 35px; border-radius: 20px; border: 1px solid var(--border); transition: 0.3s; display: flex; flex-direction: column; min-height: 250px; justify-content: space-between; overflow: hidden; position: relative; }
        .rule-card:hover { border-color: var(--blue); background: rgba(30, 30, 30, 0.8); transform: translateY(-5px); }
        .rule-card i { font-size: 2rem; color: var(--blue); margin-bottom: 15px; }
        .rule-card h4 { font-size: 1.4rem; font-weight: 800; margin-bottom: 5px; }
        .rule-card p { color: var(--text-dim); font-size: 0.9rem; }
        .apply-btn, .vip-btn-buy { width: 100%; padding: 15px; border-radius: 10px; font-weight: 800; border: none; cursor: pointer; transition: 0.3s; margin-top: auto; }
        .btn-open { background: var(--success); color: white; }
        .btn-closed { background: rgba(34, 10, 10, 0.8); color: #ff4444; border: 1px solid rgba(255, 68, 68, 0.2); cursor: not-allowed; }
        .btn-vip { background: var(--gold); color: #000; }
        .btn-hero { display: inline-flex; align-items: center; gap: 15px; padding: 18px 45px; border-radius: 12px; font-weight: 800; text-decoration: none; border: none; cursor: pointer; transition: 0.3s; }
        .btn-primary { background: var(--blue); color: white; animation: pulseBtn 2s infinite; }
        @keyframes pulseBtn { 0% { box-shadow: 0 0 0 0 rgba(0, 112, 243, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(0, 112, 243, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 112, 243, 0); } }
        .stats-row { display: flex; gap: 80px; margin-top: 60px; }
        .stat-box h2 { font-size: 3.5rem; font-weight: 800; margin: 0; line-height: 1; }
        .stat-box .label { color: var(--text-dim); text-transform: uppercase; font-weight: 700; letter-spacing: 2px; }
        #live-toast-container { position: fixed; bottom: 60px; right: 20px; z-index: 2500; display: flex; flex-direction: column; gap: 10px; pointer-events: none; }
        .live-toast { background: rgba(12, 12, 12, 0.95); border: 1px solid var(--border); border-left: 4px solid var(--blue); padding: 15px 20px; border-radius: 10px; color: white; min-width: 250px; animation: slideIn 0.5s forwards; display: flex; align-items: center; gap: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        .live-toast.hide { animation: slideOut 0.5s forwards; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 3000; justify-content: center; align-items: flex-start; padding: 20px; overflow-y: auto; opacity: 0; transition: 0.4s; backdrop-filter: blur(10px); }
        .modal-overlay.open { display: flex; opacity: 1; }
        .modal-content { background: #0f0f0f; border: 1px solid var(--border); border-radius: 25px; padding: 50px; width: 100%; max-width: 650px; position: relative; margin: 50px auto; transform: scale(0.95); transition: 0.4s; }
        .modal-overlay.open .modal-content { transform: scale(1); }
        .close-modal { position: absolute; top: 25px; right: 25px; font-size: 1.5rem; color: #666; cursor: pointer; }
        .input-group { margin-bottom: 20px; position: relative; }
        .custom-input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--border); padding: 15px; border-radius: 12px; color: white; outline: none; transition: 0.3s; }
        .custom-input:focus { border-color: var(--blue); background: rgba(255,255,255,0.1); }
        textarea.custom-input { min-height: 100px; resize: vertical; }
        .input-label { display: block; margin-bottom: 8px; font-weight: 700; color: #ccc; }
        .submit-btn { width: 100%; padding: 15px; background: linear-gradient(135deg, var(--blue), #0060d0); border: none; border-radius: 12px; color: white; font-weight: 800; cursor: pointer; margin-top: 15px; }
        .admin-app-card { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--blue); }
        .admin-app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .admin-app-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .admin-answer-box { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; }
        .admin-answer-label { font-size: 0.75rem; text-transform: uppercase; color: var(--text-dim); font-weight: 800; display: block; margin-bottom: 5px; }
        .admin-actions { display: flex; gap: 10px; margin-top: 15px; }
        .ticker-wrap { position: fixed; bottom: 0; width: 100%; height: 40px; background: rgba(0,0,0,0.95); border-top: 1px solid var(--border); display: flex; align-items: center; z-index: 2000; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 40s linear infinite; }
        .ticker__item { display: inline-block; padding: 0 3rem; color: #fff; font-weight: 600; font-size: 0.9rem; }
        .ticker__item span { color: var(--blue); }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }
        #toast { visibility: hidden; min-width: 250px; background-color: #111; color: #fff; text-align: center; border-radius: 12px; padding: 16px; position: fixed; z-index: 2000; left: 50%; bottom: 80px; transform: translateX(-50%); border: 1px solid var(--success); font-weight: bold; }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 80px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 80px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        
        /* ADMIN CONTROLS */
        .admin-controls { display: none; margin-top: 15px; gap: 10px; width: 100%; }
        .admin-controls.visible { display: flex; }
        
        /* NAUJAS MODERNAUS MYGTUKO STILIUS */
        .toggle-btn {
            flex: 1;
            padding: 12px;
            font-size: 0.75rem;
            font-weight: 800;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.4);
            color: #ccc;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }
        .toggle-btn:hover {
            background: rgba(0, 112, 243, 0.2);
            border-color: var(--blue);
            color: white;
            box-shadow: 0 0 15px rgba(0, 112, 243, 0.3);
        }

        @media (max-width: 1200px) { .main-wrapper { max-width: 90%; } }
        @media (max-width: 768px) {
            nav { position: relative; height: auto; padding: 20px; flex-direction: column; gap: 20px; background: var(--bg); border-bottom: 1px solid var(--border); }
            .nav-right, .nav-links { flex-direction: column; gap: 15px; width: 100%; text-align: center; }
            .nav-links a { font-size: 1.1rem; padding: 10px; width: 100%; display: block; border-bottom: 1px solid rgba(255,255,255,0.05); }
            .nav-links a::after { display: none; }
            section { padding-top: 40px !important; min-height: auto; margin-bottom: 60px; }
            #dashboard { padding-top: 40px !important; }
            .glass-card { padding: 25px; }
            h1 { font-size: 2.8rem; margin-bottom: 20px; }
            .dash-grid, .vip-grid, .admin-app-grid { grid-template-columns: 1fr; }
            .stats-row { flex-direction: column; gap: 30px; }
            .stat-box { text-align: center; }
            .ticker-wrap { height: 35px; }
            .ticker__item { font-size: 0.75rem; }
            #live-toast-container { bottom: 50px; right: 10px; left: 10px; align-items: center; }
            .btn-hero, #auth-container, #discord-btn { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="loader-content">
            <div class="loader-text" id="loaderText">TWOSIDE<span>.LT</span></div>
        </div>
    </div>

    <div id="particles"></div>
    <div id="live-toast-container"></div>

    <video autoplay muted loop playsinline id="bg-video">
        <source src="https://static.videezy.com/system/resources/previews/000/042/179/original/Traffic_lights_timelapse.mp4" type="video/mp4">
    </video>

    <div id="toast"><i class="fas fa-check-circle" style="color: #00ff88"></i> IP Nukopijuotas!</div>

    <nav>
        <div class="logo">
            <div class="status-dot"></div>
            <div>TWOSIDE<span>.LT</span></div>
        </div>
        <div class="nav-right">
            <div class="nav-links">
                <a onclick="showSection('home')" id="link-home" class="active">PAGRINDINIS</a>
                <a onclick="showSection('about')" id="link-about">SERVERIO APRA≈†YMAS</a>
                <a onclick="showSection('rules')" id="link-rules">SERVERIO TAISYKLƒñS</a>
            </div>
            <div id="auth-container">
                <button id="discord-btn" onclick="loginWithDiscord()"><i class="fab fa-discord"></i> PRISIJUNGTI</button>
                <div id="user-profile"><img id="user-avatar" src="" alt=""><span id="user-name"></span></div>
            </div>
        </div>
    </nav>

    <div class="main-wrapper">
        <section id="dashboard">
            <div class="glass-card" id="dash-card" style="border-top: 2px solid var(--blue);">
                <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
                    <div style="display:flex; align-items:center; gap:25px;">
                        <img id="dash-avatar" src="" style="width: 80px; border-radius: 20px; border: 2px solid var(--blue); box-shadow: 0 0 20px rgba(0, 112, 243, 0.4);">
                        <div>
                            <h2 id="dash-welcome" style="font-size: 2.2rem; margin:0;">Sveikas!</h2>
                            <p id="dash-id" style="color: var(--text-dim); font-family: monospace; font-size: 1rem; margin-top: 5px;"></p>
                        </div>
                    </div>
                    <button onclick="logout()" style="background: rgba(220, 53, 69, 0.1); color: #dc3545; border: 1px solid #dc3545; padding: 12px 30px; border-radius: 8px; font-weight: 800; transition:0.3s;">ATSIJUNGTI</button>
                </div>
            </div>

            <div class="glass-card" style="border-top: 2px solid #00ff88; padding: 30px;">
                <h3 style="margin-bottom: 10px; display:flex; align-items:center; gap:10px;"><i class="fas fa-id-card" style="color: var(--blue);"></i> WHITELIST STATUSAS</h3>
                <p id="wl-status-text" style="color: var(--text-dim); margin-bottom: 20px; font-size: 1.1rem;">Norƒódamas ≈æaisti serveryje, privalai u≈æpildyti anketƒÖ.</p>
                <button id="btn-wl-apply" class="apply-btn btn-open" onclick="openWhitelistApp()" style="max-width: 300px;">PILDYTI ANKETƒÑ</button>
            </div>

            <div id="admin-area" class="glass-card" style="display: none; border-top: 2px solid red;">
                <h2 style="color: var(--danger); margin-bottom: 20px;"><i class="fas fa-user-shield"></i> ADMIN ZONA: Gautos Anketos</h2>
                <div id="applications-list">
                    <p style="color: #666; text-align: center;">Kraunama...</p>
                </div>
            </div>

            <div class="dash-grid">
                <div id="card-policija" class="rule-card">
                    <div><i class="fas fa-shield-alt"></i><h4>Policijos Atranka</h4><p>Statusas: <span id="text-policija" class="status-text"></span></p></div>
                    <button id="btn-policija" class="apply-btn">KRAUNAMA...</button>
                    <div id="admin-policija" class="admin-controls"><button class="toggle-btn" onclick="toggleAppStatus('policija')">KEISTI STATUSƒÑ</button></div>
                </div>
                <div id="card-medikai" class="rule-card">
                    <div><i class="fas fa-ambulance"></i><h4>Medik≈≥ Atranka</h4><p>Statusas: <span id="text-medikai" class="status-text"></span></p></div>
                    <button id="btn-medikai" class="apply-btn">KRAUNAMA...</button>
                    <div id="admin-medikai" class="admin-controls"><button class="toggle-btn" onclick="toggleAppStatus('medikai')">KEISTI STATUSƒÑ</button></div>
                </div>
                <div id="card-mechanikai" class="rule-card">
                    <div><i class="fas fa-wrench"></i><h4>Mechanik≈≥ Atranka</h4><p>Statusas: <span id="text-mechanikai" class="status-text"></span></p></div>
                    <button id="btn-mechanikai" class="apply-btn">KRAUNAMA...</button>
                    <div id="admin-mechanikai" class="admin-controls"><button class="toggle-btn" onclick="toggleAppStatus('mechanikai')">KEISTI STATUSƒÑ</button></div>
                </div>
                <div class="rule-card" style="border-top: 4px solid var(--gold);">
                    <div><i class="fas fa-crown" style="color: var(--gold);"></i><h4>VIP Narystƒó</h4><p>Norƒódami ƒØsigyti VIP statusƒÖ, kreipkitƒós Discord Ticket.</p></div>
                    <button class="apply-btn btn-vip" onclick="openVip()">PER≈ΩI≈™RƒñTI PLANUS</button>
                </div>
            </div>
        </section>

        <section id="home">
            <div class="glass-card" style="text-align: left; padding: 80px;">
                <div style="display:inline-block; background: rgba(0, 112, 243, 0.15); padding: 8px 20px; border-radius: 30px; color: var(--blue); font-weight: 800; font-size: 0.9rem; margin-bottom: 25px; border: 1px solid var(--blue); letter-spacing: 1px;">
                    <i class="fas fa-check-circle" style="margin-right: 5px;"></i> SEZONAS 2.0 STARTAVO
                </div>
                <h1>TIKRASIS<br><span class="blue-gradient typewriter">ROLEPLAY.</span></h1>
                <p style="color: var(--text-dim); margin-bottom: 50px; max-width: 600px; font-size: 1.2rem; line-height: 1.6;">
                    Prisijunk prie sparƒçiausiai auganƒçios bendruomenƒós Lietuvoje. Unikalios sistemos, brandi administracija ir tavo nauja istorija.
                </p>
                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                    <button class="btn-hero btn-primary" onclick="copyIP()"><i class="fas fa-play"></i> PRISIJUNGTI DABAR</button>
                    <a href="https://discord.gg/SyGUUGWqj6" target="_blank" class="btn-hero" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color:white;"><i class="fab fa-discord"></i> DISCORD</a>
                </div>
                <div class="stats-row">
                    <div class="stat-box"><div class="label">≈Ωaidƒójai</div><h2 id="pCount">0<span style="font-size:1.5rem; color:#888;">/128</span></h2></div>
                    <div class="stat-box"><div class="label">Pareig≈´nai</div><h2 id="pCops" style="color: var(--police);">0</h2></div>
                    <div class="stat-box"><div class="label">Discord Nariai</div><h2 id="pDiscord" style="color: #5865F2;">0</h2></div>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="glass-card">
                <h2 style="font-size: 3rem; margin-bottom: 40px;">KODƒñL <span class="blue-gradient">TWOSIDE?</span></h2>
                <div class="dash-grid">
                    <div class="rule-card"><i class="fas fa-tachometer-alt"></i><h4>Optimizuota</h4><p>Serveris kurtas galvojant apie stabilumƒÖ, ne apie bereikalingus efektus.</p></div>
                    <div class="rule-card"><i class="fas fa-users"></i><h4>Bendruomenƒó</h4><p>Draugi≈°ka ir brandi bendruomenƒó. ƒåia rasite draug≈≥, o ne prie≈°≈≥.</p></div>
                    <div class="rule-card"><i class="fas fa-briefcase"></i><h4>Ekonomika</h4><p>Realisti≈°ka ekonomika. Pinigai neu≈ædirbami per minutƒô, bet kiekvienas u≈ædarbis turi vertƒô.</p></div>
                </div>
            </div>
        </section>

        <section id="rules">
            <div class="glass-card">
                <h2 style="font-size: 3rem; margin-bottom: 40px;">SVARBIAUSIOS <span class="blue-gradient">TAISYKLƒñS</span></h2>
                <div class="dash-grid">
                    <div class="rule-card"><h4><i class="fas fa-skull"></i> RDM</h4><p>Grie≈ætai draud≈æiama ≈æudyti ar ≈æaloti kitus ≈æaidƒójus be svarios RP prie≈æasties.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-car-crash"></i> VDM</h4><p>Draud≈æiama naudoti transporto priemonƒô kaip ginklƒÖ trai≈°kant ≈æmones.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-theater-masks"></i> Power Gaming</h4><p>Draud≈æiama atlikti veiksmus, kurie fizi≈°kai neƒØmanomi realiame gyvenime.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-sync-alt"></i> NLR (New Life Rule)</h4><p>Jei mir≈°tate, j≈´s neatsimenate paskutinƒós RP situacijos.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-exclamation-triangle"></i> Fear RP</h4><p>Privalote branginti savo gyvybƒô. Jei jums grasina ginklu, turite paklusti.</p></div>
                    <div class="rule-card"><h4><i class="fas fa-headset"></i> Meta Gaming</h4><p>Draud≈æiama naudoti informacijƒÖ, gautƒÖ ne ≈æaidime b≈´du (Discord ir t.t.).</p></div>
                </div>
            </div>
        </section>
    </div>

    <div class="modal-overlay" id="whitelistModal">
        <div class="modal-content">
            <div class="close-modal" onclick="closeWhitelistApp()"><i class="fas fa-times"></i></div>
            <h2 style="text-align: center; margin-bottom: 20px; font-weight: 800;">WHITELIST ANKETA</h2>
            <form id="wlForm" onsubmit="submitWhitelistForm(event)">
                <div class="input-group">
                    <label class="input-label">1. Kiek tau met≈≥?</label>
                    <input type="number" id="wl_age" class="custom-input" placeholder="Pvz: 16" required>
                </div>
                <div class="input-group">
                    <label class="input-label">2. Kokiuose projektuose ≈æaidei anksƒçiau?</label>
                    <textarea id="wl_history" class="custom-input" placeholder="I≈°vardink projektus..." required></textarea>
                </div>
                <div class="input-group">
                    <label class="input-label">3. Kas yra NLR? (Paai≈°kink)</label>
                    <textarea id="wl_nlr" class="custom-input" placeholder="New Life Rule yra..." required></textarea>
                </div>
                <div class="input-group">
                    <label class="input-label">4. Kas yra FEARRP? (Paai≈°kink)</label>
                    <textarea id="wl_fearrp" class="custom-input" placeholder="Fear Roleplay yra..." required></textarea>
                </div>
                <div class="input-group">
                    <label class="input-label">5. Kodƒól nusprendei ≈æaisti ≈°iame serveryje?</label>
                    <textarea id="wl_why" class="custom-input" placeholder="Mane sudomino..." required></textarea>
                </div>
                <button type="submit" class="submit-btn">SI≈≤STI ANKETƒÑ</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="vipModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="close-modal" onclick="closeVip()"><i class="fas fa-times"></i></div>
            <h2 style="text-align:center; margin-bottom:10px; font-size: 2.2rem; font-weight: 900;">VIP PLANAI</h2>
            <div class="vip-grid">
                <div class="vip-card vip-bronze"><div class="vip-title" style="color: var(--bronze)">Bronze</div><div class="vip-price">5‚Ç¨ <span>/mƒón</span></div><ul class="vip-list"><li><i class="fas fa-check"></i> Prioritetinƒó eilƒó</li></ul><button class="vip-btn-buy" onclick="window.open('https://discord.gg/SyGUUGWqj6')">PIRKTI</button></div>
                <div class="vip-card vip-silver"><div class="vip-title" style="color: var(--silver)">Silver</div><div class="vip-price">10‚Ç¨ <span>/mƒón</span></div><ul class="vip-list"><li><i class="fas fa-check"></i> Prioritetinƒó eilƒó + 1 Auto</li></ul><button class="vip-btn-buy" onclick="window.open('https://discord.gg/SyGUUGWqj6')">PIRKTI</button></div>
                <div class="vip-card vip-gold"><div class="vip-title" style="color: var(--gold)">Gold</div><div class="vip-price">20‚Ç¨ <span>/mƒón</span></div><ul class="vip-list"><li><i class="fas fa-check"></i> Auk≈°ƒçiausia eilƒó + Namas</li></ul><button class="vip-btn-buy" onclick="window.open('https://discord.gg/SyGUUGWqj6')" style="background: var(--gold); color: #000; border: none;">PIRKTI</button></div>
            </div>
        </div>
    </div>

    <div class="ticker-wrap">
        <div class="ticker">
            <div class="ticker__item">üì¢ Dƒómesio: <span>Serverio startas</span> KOVO 18 DIENƒÑ!</div>
            <div class="ticker__item">üéâ Serverio atidarymo renginys: <span>Drago lenktynƒós</span></div>
            <div class="ticker__item">üíé Naujos <span>VIP</span> sistemos atnaujinimas</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set, onValue, get, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // --- KONFIG≈™RACIJA (TAVO VPS) ---
        const replitURL = "https://twoside-final-v3.loca.lt"; 

        const firebaseConfig = {
            apiKey: "AIzaSyCQXr6AJSfWDvQAAsIbSSHVhznbKkZ_-sQ",
            authDomain: "twosiderp-4e580.firebaseapp.com",
            databaseURL: "https://twosiderp-4e580-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "twosiderp-4e580",
            storageBucket: "twosiderp-4e580.firebasestorage.app",
            messagingSenderId: "639976729105",
            appId: "1:639976729105:web:443d951377221ccfc01fb0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        window.db = db; window.ref = ref; window.update = update; window.get = get;

        window.SERVER_CONFIG = {
            fivem_code: '3zv39z', 
            discord_server_id: '1380526027331207271', 
            server_ip: 'connect cfx.re/join/3zv39z',
            status: { policija: false, medikai: false, mechanikai: false },
            client_id: '1470568120921100423',
            redirect: 'https://twoside.lt'
        };

        let CURRENT_USER = null;

        // --- DASHBOARD FUNKCIJOS ---
        const statusRef = ref(db, 'serverStatus');
        onValue(statusRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                window.SERVER_CONFIG.status = data;
                initDashboard();
            }
        });

        window.toggleAppStatus = async function(job) {
            const currentRef = ref(db, `serverStatus/${job}`);
            const snapshot = await get(currentRef);
            const updates = {}; updates[`serverStatus/${job}`] = !snapshot.val();
            update(ref(db), updates);
            alert(`${job} statusas pakeistas!`);
        };

        window.openWhitelistApp = () => { document.getElementById('whitelistModal').classList.add('open'); };
        window.closeWhitelistApp = () => { document.getElementById('whitelistModal').classList.remove('open'); };
        window.openVip = () => { document.getElementById('vipModal').classList.add('open'); };
        window.closeVip = () => { document.getElementById('vipModal').classList.remove('open'); };
        
        window.copyIP = () => {
            const ip = window.SERVER_CONFIG.server_ip;
            navigator.clipboard.writeText(ip).then(() => { const toast = document.getElementById("toast"); toast.className = "show"; setTimeout(() => toast.className = "", 3000); });
            setTimeout(() => { window.location.href = `fivem://${ip}`; }, 500);
        };

        window.loginWithDiscord = () => { window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${window.SERVER_CONFIG.client_id}&redirect_uri=${encodeURIComponent(window.SERVER_CONFIG.redirect)}&response_type=token&scope=identify`; };
        window.logout = () => { localStorage.removeItem('discord_token'); window.location.href = window.SERVER_CONFIG.redirect; };
        window.showSection = (id) => { const element = document.getElementById(id); if(element) element.scrollIntoView({ behavior: 'smooth', block: 'start' }); };

        // --- WHITELIST FORMA (SIUNƒåIA ƒÆ VPS) ---
        window.submitWhitelistForm = async function(e) {
            e.preventDefault();
            if(!CURRENT_USER) return alert("Klaida: Neprisijungta.");

            const payload = {
                discordId: CURRENT_USER.id,
                discordName: CURRENT_USER.username,
                answers: {
                    age: document.getElementById('wl_age').value,
                    history: document.getElementById('wl_history').value,
                    nlr: document.getElementById('wl_nlr').value,
                    fearrp: document.getElementById('wl_fearrp').value,
                    why: document.getElementById('wl_why').value
                }
            };

            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "SIUNƒåIAMA...";
            btn.disabled = true;

            try {
                const res = await fetch(`${replitURL}/submit-app`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const data = await res.json();
                
                if(data.success) {
                    alert("Anketa sƒókmingai i≈°si≈≥sta! Administratoriai jƒÖ per≈æi≈´rƒós.");
                    closeWhitelistApp();
                    document.getElementById('wlForm').reset();
                    document.getElementById('wl-status-text').innerText = "‚úÖ J≈´s≈≥ anketa i≈°si≈≥sta ir laukia patvirtinimo.";
                    document.getElementById('btn-wl-apply').style.display = 'none';
                } else {
                    alert("Klaida siunƒçiant anketƒÖ.");
                }
            } catch(err) {
                console.error(err);
                alert("Nepavyko susisiekti su serveriu.");
            }
            btn.innerText = originalText;
            btn.disabled = false;
        };

        // --- ADMINO FUNKCIJOS ---
        async function loadAdminPanel(adminId) {
            try {
                const res = await fetch(`${replitURL}/get-apps?adminId=${adminId}`);
                const apps = await res.json();
                const list = document.getElementById('applications-list');
                
                if(apps.length === 0) {
                    list.innerHTML = '<p style="text-align:center; color:#888;">Nƒóra nauj≈≥ anket≈≥.</p>';
                    return;
                }

                list.innerHTML = apps.map(app => `
                    <div class="admin-app-card" id="app-${app.id}">
                        <div class="admin-app-header">
                            <h3 style="margin:0;">${app.discordName} <span style="font-size:0.8rem; color:#666;">(ID: ${app.discordId})</span></h3>
                            <span style="font-size:0.8rem; color:#888;">${new Date(parseInt(app.id)).toLocaleTimeString()}</span>
                        </div>
                        <div class="admin-app-grid">
                            <div class="admin-answer-box"><span class="admin-answer-label">Am≈æius</span>${app.answers.age}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">Istorija</span>${app.answers.history}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">NLR</span>${app.answers.nlr}</div>
                            <div class="admin-answer-box"><span class="admin-answer-label">FearRP</span>${app.answers.fearrp}</div>
                            <div class="admin-answer-box" style="grid-column: span 2;"><span class="admin-answer-label">Kodƒól mes?</span>${app.answers.why}</div>
                        </div>
                        <div class="admin-actions">
                            <button class="toggle-btn" style="background:var(--success); border:none;" onclick="handleApp('${app.id}', 'approve')">PRIIMTI (U≈ædƒóti Rolƒô)</button>
                            <button class="toggle-btn" style="background:var(--danger); border:none;" onclick="handleApp('${app.id}', 'reject')">ATMESTI</button>
                        </div>
                    </div>
                `).join('');
                
                document.getElementById('admin-area').style.display = 'block';
            } catch(e) { console.error("Admin Load Error:", e); }
        }

        window.handleApp = async function(appId, action) {
            if(!confirm(action === 'approve' ? "Priimti ir u≈ædƒóti rolƒô?" : "Atmesti anketƒÖ?")) return;
            
            try {
                const res = await fetch(`${replitURL}/handle-app`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ adminId: CURRENT_USER.id, appId, action })
                });
                const data = await res.json();
                alert(data.msg);
                if(data.success) {
                    document.getElementById(`app-${appId}`).remove();
                }
            } catch(e) { alert("Serverio klaida."); }
        }

        // --- AUTH & LOAD ---
        function fetchDiscordUser(token) {
            fetch('https://discord.com/api/users/@me', { headers: { authorization: `Bearer ${token}` } })
            .then(res => res.ok ? res.json() : Promise.reject())
            .then(async user => {
                CURRENT_USER = user;
                document.getElementById('discord-btn').style.display = 'none'; 
                document.getElementById('user-profile').style.display = 'flex';
                document.getElementById('user-name').innerText = user.username; 
                document.getElementById('user-avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                
                document.getElementById('dashboard').style.display = 'block'; 
                document.getElementById('dash-welcome').innerText = `Sveikas, ${user.username}! üëã`;
                document.getElementById('dash-id').innerText = `ID: ${user.id}`; 
                document.getElementById('dash-avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                
                try {
                    const response = await fetch(`${replitURL}/check-admin?id=${user.id}`);
                    const data = await response.json();

                    if (data.isAdmin === true) {
                        const loaderText = document.getElementById('loaderText');
                        loaderText.innerHTML = "TWOSIDE <span style='color:red;'>ADMIN</span>";
                        loaderText.classList.add('admin-load-text');
                        
                        document.querySelectorAll('.admin-controls').forEach(el => el.classList.add('visible'));
                        const dashCard = document.getElementById('dash-card');
                        dashCard.classList.add('admin-mode-card');
                        document.getElementById('dash-welcome').innerHTML += ' <span class="admin-badge">ADMIN</span>';

                        const container = document.getElementById('live-toast-container');
                        const toast = document.createElement('div'); toast.className = 'live-toast';
                        toast.style.borderLeft = "4px solid red";
                        toast.innerHTML = `<i class="fas fa-unlock" style="color: red"></i><div class="live-toast-content"><div>SISTEMA</div><div>Administratoriaus teisƒós patvirtintos.</div></div>`;
                        container.appendChild(toast);
                        
                        // U≈ΩKRAUNAM ADMIN PANELƒò
                        loadAdminPanel(user.id);
                        
                        setTimeout(() => { document.getElementById('preloader').classList.add('hidden'); }, 1500);
                    } else {
                        document.getElementById('preloader').classList.add('hidden');
                    }
                } catch (e) {
                    console.error("Klaida susisiekiant su VPS:", e);
                    document.getElementById('preloader').classList.add('hidden');
                }

            }).catch(() => {
                localStorage.removeItem('discord_token');
                document.getElementById('preloader').classList.add('hidden');
            });
        }

        const fakeNames = ["Jonas_K.", "Lukas_P.", "Karolis_B.", "Mantas_S.", "Tomas_G.", "Deividas_M.", "Paulius_A.", "Rokas_Z."];
        const fakeActions = [{ text: "nusipirko VIP Gold", icon: "fa-crown", color: "#ffc107" }, { text: "u≈æpildƒó Policijos anketƒÖ", icon: "fa-shield-alt", color: "#0070f3" }, { text: "laimƒójo Kazino", icon: "fa-dice", color: "#e91e63" }];
        function showFakeNotification() {
            const container = document.getElementById('live-toast-container'); const randomName = fakeNames[Math.floor(Math.random() * fakeNames.length)]; const randomAction = fakeActions[Math.floor(Math.random() * fakeActions.length)]; const toast = document.createElement('div'); toast.className = 'live-toast'; toast.innerHTML = `<i class="fas ${randomAction.icon}" style="color: ${randomAction.color}"></i><div class="live-toast-content"><div>${randomName}</div><div>${randomAction.text}</div></div>`; container.appendChild(toast); setTimeout(() => { toast.classList.add('hide'); setTimeout(() => toast.remove(), 500); }, 4000);
        }

        function animateValue(obj, start, end, duration, suffix = '') { let startTimestamp = null; const step = (timestamp) => { if (!startTimestamp) startTimestamp = timestamp; const progress = Math.min((timestamp - startTimestamp) / duration, 1); obj.innerHTML = Math.floor(progress * (end - start) + start) + suffix; if (progress < 1) window.requestAnimationFrame(step); }; window.requestAnimationFrame(step); }
        function createParticles() { const container = document.getElementById('particles'); for(let i=0; i<20; i++) { let part = document.createElement('div'); part.className = 'particle'; let size = Math.random() * 3 + 1; part.style.width = `${size}px`; part.style.height = `${size}px`; part.style.left = `${Math.random() * 100}vw`; part.style.top = `${Math.random() * 100}vh`; part.style.animationDuration = `${Math.random() * 10 + 10}s`; part.style.animationDelay = `-${Math.random() * 20}s`; container.appendChild(part); } }
        function initTilt() { document.querySelectorAll('.rule-card, .vip-card').forEach(card => { card.addEventListener('mousemove', (e) => { const rect = card.getBoundingClientRect(); const x = e.clientX - rect.left; const y = e.clientY - rect.top; const rotateX = ((y - rect.height / 2) / rect.height / 2) * -5; const rotateY = ((x - rect.width / 2) / rect.width / 2) * 5; card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`; }); card.addEventListener('mouseleave', () => card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)'); }); }
        function initDashboard() { const setupCard = (id, isOpen, openText) => { const btn = document.getElementById(`btn-${id}`); const txt = document.getElementById(`text-${id}`); if(isOpen) { txt.innerText = "ATIDARYTA"; txt.className = "status-text st-green"; btn.innerText = "PILDYTI ANKETƒÑ"; btn.className = "apply-btn btn-open"; btn.onclick = () => window.openApp(openText); } else { txt.innerText = "U≈ΩDARYTA"; txt.className = "status-text st-red"; btn.innerText = "LAIKINAI U≈ΩDARYTA"; btn.className = "apply-btn btn-closed"; btn.onclick = null; } }; setupCard('policija', window.SERVER_CONFIG.status.policija, 'Policija'); setupCard('medikai', window.SERVER_CONFIG.status.medikai, 'Medikai'); setupCard('mechanikai', window.SERVER_CONFIG.status.mechanikai, 'Mechanikai'); }
        function fetchStats() { if(window.SERVER_CONFIG.fivem_code !== 'SOON') { fetch(`https://servers-frontend.fivem.net/api/servers/single/${window.SERVER_CONFIG.fivem_code}`).then(res => res.json()).then(data => { if(data && data.Data) { const players = data.Data.clients; const maxPlayers = data.Data.sv_maxclients; document.getElementById('pCount').innerHTML = `${players}<span style="font-size:1.5rem; color:#888;">/${maxPlayers}</span>`; const cops = Math.floor(players / 8) + Math.floor(Math.random() * 2); animateValue(document.getElementById('pCops'), 0, cops > 0 ? cops : 0, 2000); } }).catch(() => console.log('FiveM Offline')); } fetch(`https://discord.com/api/guilds/${window.SERVER_CONFIG.discord_server_id}/widget.json`).then(res => res.json()).then(data => { if(data.presence_count) animateValue(document.getElementById('pDiscord'), 0, data.presence_count * 6, 2000); }).catch(() => console.log('Discord Widget Error')); }

        const token = new URLSearchParams(window.location.hash.slice(1)).get('access_token') || localStorage.getItem('discord_token');
        if(token) { 
            localStorage.setItem('discord_token', token); 
            if(window.location.hash) window.history.replaceState({}, document.title, "/"); 
            fetchDiscordUser(token);
        } else {
            setTimeout(() => document.getElementById('preloader').classList.add('hidden'), 1500);
        }

        createParticles(); initTilt(); initDashboard();
        setTimeout(() => { setInterval(showFakeNotification, 12000); showFakeNotification(); }, 10000);
        
        document.getElementById('pCount').innerHTML = '0<span style="font-size:1.5rem; color:#888;">/128</span>'; document.getElementById('pCops').innerHTML = '0'; document.getElementById('pDiscord').innerHTML = '0';
        if(window.SERVER_CONFIG.fivem_code === 'SOON') { setTimeout(() => { animateValue(document.getElementById('pCount'), 0, 60 + Math.floor(Math.random() * 15), 2000, '<span style="font-size:1.5rem; color:#888;">/128</span>'); animateValue(document.getElementById('pCops'), 0, 7, 2000); animateValue(document.getElementById('pDiscord'), 0, 1420, 2000); }, 1600); }
        fetchStats();

        window.addEventListener('scroll', () => { let current = ''; document.querySelectorAll('section').forEach(section => { if(getComputedStyle(section).display === 'none') return; if (pageYOffset >= (section.offsetTop - 200)) current = section.getAttribute('id'); }); document.querySelectorAll('.nav-links a').forEach(li => { li.classList.remove('active'); if (li.id === `link-${current}`) li.classList.add('active'); }); });
    </script>
</body>
</html>
